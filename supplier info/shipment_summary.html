<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shipment Summary | EcoSSure</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Link CSS -->
  <link rel="stylesheet" href="shipment_summary.css">
</head>
<body>

  <!--  Header -->
  <header>
    <div class="logo-section">
      <span class="site-name">EcoAssure</span>
    </div>
    <nav class="nav-links">
      <a href="#">Dashboard</a>
      <a href="#">Profile</a>
      <a href="#">Add Shipment</a>
      <a href="#">Logout</a>
    </nav>
  </header>
  <!--  Main Content -->
  <main>
    <h1>Shipment Summary</h1>

    <div class="summary-box">
      <h2>Submitted Details</h2>
      <table id="shipmentTable">
        <!-- JS inserts rows here -->
      </table>

      <div class="status">
        <h3>Status: Pending Verification</h3>
        <p>Your shipment is being validated with live tracking checks:</p>
        <ul>
          <li>Distance vs. Google Maps route</li>
          <li>Mode/vehicle type feasibility</li>
          <li>CO₂ emissions sanity check</li>
          <li>Pattern detection</li>
        </ul>
        <p>Once verified, you’ll see it as <strong>Verified ✅</strong>.</p>
      </div>

      <a href="supplier_shipment_input.html" class="back-btn">Submit Another Shipment</a>
    </div>

    <div class="map-container">
      <h2>Live Route Preview</h2>
      <iframe id="mapFrame" width="100%" height="400" frameborder="0" style="border:0" allowfullscreen></iframe>
    </div>
  </main>

  <!--  Footer -->
  <footer>
    <p>Supplier Information Summary 2025 EcoAssure</p>
  </footer>

  <!--  JS -->
  <script>
    const data = JSON.parse(localStorage.getItem('shipmentData'));
    const table = document.getElementById('shipmentTable');

    if (data) {
      table.innerHTML = `
        <tr><th>Supplier Name</th><td>${data.supplierName}</td></tr>
        <tr><th>Origin</th><td>${data.origin}</td></tr>
        <tr><th>Destination</th><td>${data.destination}</td></tr>
        <tr><th>Distance</th><td>${data.distance} km</td></tr>
        <tr><th>Mode of Transport</th><td>${data.mode}</td></tr>
        <tr><th>Vehicle Type</th><td>${data.vehicleType}</td></tr>
        <tr><th>Shipment Weight/Volume</th><td>${data.weightVolume}</td></tr>
        <tr><th>Route Type</th><td>${data.routeType}</td></tr>
      `;

      const origin = encodeURIComponent(data.origin);
      const destination = encodeURIComponent(data.destination);

      let googleMode = 'driving';
      switch (data.mode.toLowerCase()) {
        case 'truck': googleMode = 'driving'; break;
        case 'rail': case 'ship': googleMode = 'transit'; break;
        case 'air': googleMode = 'driving'; break;
        default: googleMode = 'driving';
      }

      const apiKey = 'AIzaSyCgCCrdKkodpwg5z6l5wP05skYhPRy4XaM'; 
      const mapUrl = `https://www.google.com/maps/embed/v1/directions?key=${apiKey}&origin=${origin}&destination=${destination}&mode=${googleMode}`;
      document.getElementById('mapFrame').src = mapUrl;
    } else {
      table.innerHTML = '<tr><td colspan="2">No shipment data found.</td></tr>';
    }
  </script>
</body>
</html>
